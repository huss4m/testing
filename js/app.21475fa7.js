(function(){"use strict";var e={2236:function(e,t,i){var a=i(3751),n=i(641);function r(e,t,i,a,r,o){var s=(0,n.g2)("Savior");return(0,n.uX)(),(0,n.Wv)(s)}var o=i.p+"img/saviorlogo.9b5cb683.png",s=i.p+"img/olympiclogo.f8beb764.png",l=(0,n.Fv)('<meta name="viewport" content="width=device-width, initial-scale=1.0" data-v-036e46e7><div class="banner" data-v-036e46e7><div class="logo-container" data-v-036e46e7><img src="'+o+'" id="saviorlogo" data-v-036e46e7><img src="'+s+'" id="olympicLogo" data-v-036e46e7></div></div>',2),u={ref:"canvas"},c=(0,n.Fv)('<footer class="footer" data-v-036e46e7><p class="footer-text" data-v-036e46e7>Credits: First person weapon models by <a href="https://sketchfab.com/bumstrum" target="_blank" class="credit-link" data-v-036e46e7>3DMaesen (bumstrum)</a> under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="license-link" data-v-036e46e7>CC BY 4.0</a> (CC Attribution License).</p><p class="footer-text" data-v-036e46e7> Torch model <a href="https://sketchfab.com/leondp" target="_blank" class="credit-link" data-v-036e46e7>Nortenko Dmytro</a> under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="license-link" data-v-036e46e7>CC BY 4.0</a> (CC Attribution License).</p><p class="footer-text" data-v-036e46e7> Olympic medal <a href="https://sketchfab.com/AlbertoLuviano" target="_blank" class="credit-link" data-v-036e46e7>Alberto Luviano</a> under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="license-link" data-v-036e46e7>CC BY 4.0</a> (CC Attribution License).</p><p class="footer-text" data-v-036e46e7> Health kit <a href="https://sketchfab.com/stefanocagnani1990" target="_blank" class="credit-link" data-v-036e46e7>Stefano Cagnani</a> under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="license-link" data-v-036e46e7>CC BY 4.0</a> (CC Attribution License).</p><p class="footer-text" data-v-036e46e7>Credit to <a href="https://www.FesliyanStudios.com" target="_blank" class="credit-link" data-v-036e46e7>FesliyanStudios</a> for the background music </p></footer>',1);function h(e,t,i,a,r,o){return(0,n.uX)(),(0,n.CE)("div",null,[l,(0,n.Lk)("canvas",u,null,512),c])}var p=i(5055),b=(i(322),i(1635)),d=function(){function e(t,i){Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationGroups",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"health",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rootMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDead",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runSpeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"walkSpeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"damage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attackSpeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attackSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"punch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"death",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"walk",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uppercut",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"randPosition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aggroRange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"transformNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enemyCollider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"collider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"appliesDot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isSpellCasting",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isAttacking",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isReacting",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scoreValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attackTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.scene=t,this.level=i,this.isSpellCasting=!1,this.health=100,this.name="Monster",this.mesh=null,this.rootMesh=null,this.isDead=!1,this.appliesDot=!1,this.id=++e.enemyCount,this.states={DESTROYED:!1,FOLLOWING:!1,ATTACKING:!1},this.isAttacking=!1,this.isReacting=!1,this.generateRandomPosition()}return Object.defineProperty(e.prototype,"CreateMonster",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,Promise,(function(){var t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","mutant.glb")];case 1:return t=n.sent(),i=t.meshes,a=t.animationGroups,i[1].scaling=new p.Pq0(2,2,2),i[1].position=e,this.animationGroups=a,this.mesh=i[1],this.rootMesh=i[0],this.mesh.checkCollisions=!0,p.YDL.AddTagsTo(this.mesh,"enemy"),a[0].stop(),a[2].play(!0),[2]}}))}))}}),Object.defineProperty(e.prototype,"deathAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isDead=!0,this.animationGroups[2].stop(),this.animationGroups[3].stop(),this.animationGroups[4].stop(),this.animationGroups[5].stop(),this.animationGroups[1].start(!1),this.animationGroups[1].onAnimationEndObservable.addOnce((function(){e.animationGroups[1].pause()})),console.log("WARROK DEAD")}}),Object.defineProperty(e.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){console.log("IDLE")}}),Object.defineProperty(e.prototype,"shotAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.animationGroups[5].play(!1),this.animationGroups[5].onAnimationEndObservable.addOnce((function(){e.animationGroups[2].start(!0)})),console.log("WARROK SHOT")}}),Object.defineProperty(e.prototype,"punchAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){console.log("PUNCH")}}),Object.defineProperty(e.prototype,"walkAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){console.log("WALKING")}}),Object.defineProperty(e.prototype,"runAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){console.log("RUN")}}),Object.defineProperty(e.prototype,"updateEnemyAnimations",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.states.DESTROYED||(this.states.FOLLOWING||this.states.ATTACKING?this.runAnimation():this.isSpellCasting||this.idleAnimation())}}),Object.defineProperty(e.prototype,"move",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.states.DESTROYED){var t=e.position.subtract(this.rootMesh.position).length();t<=2.5?this.attackPlayer(e):t<=this.aggroRange&&(this.isAttacking||this.isReacting||this.followPlayer(e))}}}),Object.defineProperty(e.prototype,"generateRandomPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=Math.floor(100*Math.random())-50,t=Math.floor(100*Math.random())-50;this.randPosition=new p.Pq0(e,0,t)}}),Object.defineProperty(e.prototype,"followPlayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.runAnimation(),this.states.ATTACKING=!1,this.states.FOLLOWING=!0;var t=e.position.subtract(this.rootMesh.position).normalize(),i=Math.atan2(-t.x,-t.z);this.rootMesh.rotation.y=i,this.collider.moveWithCollisions(t.multiplyByFloats(this.runSpeed,0,this.runSpeed))}}),Object.defineProperty(e.prototype,"attackPlayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this.states.FOLLOWING=!1,this.states.ATTACKING=!0,!this.attackTimer){var i=1e3/this.attackSpeed,a=function(){if(t.states.DESTROYED)return clearInterval(t.attackTimer),void(t.attackTimer=null);t.isPlayerInRange(e)&&(e.health>0?(e.health=Math.max(e.health-t.damage),t.appliesDot&&!e.hasDot&&e.applyDot(2,5e3),t.punchAnimation(),t.attackSound.play()):console.log("Player defeated!"))};a(),this.attackTimer=setInterval(a,i)}}}),Object.defineProperty(e.prototype,"isPlayerInRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.position.subtract(this.rootMesh.position).length();return t<=3.5}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.mesh&&this.rootMesh&&(this.attackTimer&&(clearInterval(this.attackTimer),this.attackTimer=null),setTimeout((function(){e.mesh.dispose(),e.rootMesh.dispose(),e.states.DESTROYED=!0}),25e3))}}),Object.defineProperty(e,"enemyCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),e}(),m=function(e){function t(t,i){var a=e.call(this,t,i)||this;return Object.defineProperty(a,"skeleton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.name="Mutant",a.damage=5,a.scoreValue=50,a.attackSpeed=.4,a.attackSound=new p.ABN("shootSound","./audio/attack/mutant.mp3",a.scene,null,{volume:.6,autoplay:!1}),a.aggroRange=200,a.health=150,a}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateMonster",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,i,a;return(0,b.sH)(this,void 0,Promise,(function(){var n,r=this;return(0,b.YH)(this,(function(o){return this.createBoxCollider(),n=this.duplicate(this.level.instances.mutantAssetContainer,e),this.rootMesh.position=e,this.rootMesh.checkCollisions=!0,this.rootMesh.rotationQuaternion=null,this.rootMesh.position=e,this.collider.position=this.rootMesh.position.clone(),this.collider.position.y+=1,console.log("MUTANT CLONE ROOT:",this.rootMesh,this.rootMesh.isVisible),console.log("Mutant root position:",null===(t=this.rootMesh)||void 0===t?void 0:t.position.x,null===(i=this.rootMesh)||void 0===i?void 0:i.position.y,null===(a=this.rootMesh)||void 0===a?void 0:a.position.z),console.log("MUTANT CLONE MESH",this.mesh,this.mesh.isVisible),console.log("Mutant mesh position:",this.mesh.position.x,this.mesh.position.y,this.mesh.position.z),this.animationGroups=n.animationGroups,this.death=this.animationGroups[1],this.idle=this.animationGroups[2],this.punch=this.animationGroups[3],this.run=this.animationGroups[4],this.shot=this.animationGroups[5],this.uppercut=this.animationGroups[6],this.walk=this.animationGroups[7],p.YDL.AddTagsTo(this.mesh,"enemy"),this.animationGroups[0].stop(),this.animationGroups[4].play(!0),this.runSpeed=.3,this.walkSpeed=.07,this.scene.registerBeforeRender((function(){r.rootMesh.position.x=r.collider.position.x,r.rootMesh.position.z=r.collider.position.z})),[2]}))}))}}),Object.defineProperty(t.prototype,"createBoxCollider",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.collider=p.PeD.CreateBox("collider",{height:1.5,width:1,depth:1},this.scene),this.collider.visibility=.3,this.collider.isVisible=!1,this.collider.checkCollisions=!0,this.collider.isPickable=!1}}),Object.defineProperty(t.prototype,"deathAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDead=!0,this.animationGroups[2].stop(),this.animationGroups[3].stop(),this.animationGroups[4].stop(),this.animationGroups[5].stop(),this.death.start(!1),this.collider.dispose(),this.remove()}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.start(!1)}}),Object.defineProperty(t.prototype,"shotAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isReacting=!0,this.shot.isPlaying||this.shot.play(!1),this.shot.onAnimationEndObservable.addOnce((function(){e.isReacting=!1}))}}),Object.defineProperty(t.prototype,"punchAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.animationGroups.forEach((function(e){e.stop()})),this.isAttacking=!0,this.punch.start(!1),this.punch.onAnimationEndObservable.addOnce((function(){e.isAttacking=!1}))}}),Object.defineProperty(t.prototype,"walkAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.walk.start(!1)}}),Object.defineProperty(t.prototype,"runAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.stop(),this.walk.stop();var e=this.animationGroups.some((function(e){return e.isPlaying}));e||this.run.start(!0)}}),Object.defineProperty(t.prototype,"cloneAnimationGroups",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.map((function(e){var i=new p.klW(e.name);return e.targetedAnimations.forEach((function(e){var a=e.animation.clone();i.addTargetedAnimation(a,t)})),i}))}}),Object.defineProperty(t.prototype,"duplicate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=e.instantiateModelsToScene(void 0,!1,{doNotInstantiate:!0});console.log(i),this.rootMesh=i.rootNodes[0],this.mesh=i.rootNodes[0].getChildMeshes()[0],this.level.shadowGen.addShadowCaster(this.mesh),this.rootMesh.setEnabled(!0),this.mesh.setEnabled(!0);for(var a=0,n=i.rootNodes;a<n.length;a++){var r=n[a];r instanceof p.VR0&&(r.position=t)}return i}}),t}(d),f=i(8206),v=function(){function e(){Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pickupSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spriteManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"glowLayer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mesh=null,this.pickupSound=new p.ABN("weaponPickup","./audio/pickups/ammobox.mp3",this.scene,null,{volume:1,autoplay:!1}),this.glowLayer=new p.VA("glow",this.scene),this.glowLayer.intensity=1}return Object.defineProperty(e.prototype,"CreateMinigunPickup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/pickups/","minigun.glb")];case 1:return t=i.sent().meshes,this.mesh=t[0],this.mesh.scaling=new p.Pq0(.01,.01,.01),this.mesh.position=e,this.mesh.position.y+=.1,t[1].checkCollisions=!0,t[1].id="minigunPickup",[2]}}))}))}}),Object.defineProperty(e.prototype,"CreatePistolPickup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/pickups/","pistol2.glb")];case 1:return t=i.sent().meshes,this.mesh=t[0],this.mesh.scaling=new p.Pq0(.02,.02,.02),this.mesh.position=e,this.mesh.position.y+=.1,t[1].checkCollisions=!0,t[1].id="pistolPickup",[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateRiflePickup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/pickups/","rifle2.glb")];case 1:return t=i.sent().meshes,this.mesh=t[0],this.mesh.scaling=new p.Pq0(.02,.02,.02),this.mesh.position=e,this.mesh.position.y+=.1,t[1].checkCollisions=!0,t[1].id="riflePickup",[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateLMGPickup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/pickups/","lmg2.glb")];case 1:return t=i.sent().meshes,this.mesh=t[0],this.mesh.scaling=new p.Pq0(2,2,2),this.mesh.position=e,this.mesh.position.y+=.1,t[1].checkCollisions=!0,t[1].id="lmgPickup",[2]}}))}))}}),e}(),y=function(){function e(e,t){Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pickupSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"meshes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mesh=null,this.scene=e,this.pickupSound=new p.ABN("ammoBoxPickup","./audio/pickups/ammobox.mp3",this.scene,null,{volume:1,autoplay:!1}),this.camera=t}return Object.defineProperty(e.prototype,"CreateAmmoPickup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","ammocrate.glb")];case 1:return t=i.sent().meshes,this.mesh=t[0],this.mesh.scaling=new p.Pq0(-2.5,2.5,2.5),this.mesh.position=e,t[1].checkCollisions=!0,t[1].id="ammoBox",[2]}}))}))}}),Object.defineProperty(e.prototype,"collectAmmo",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.mesh&&(this.mesh.dispose(),this.mesh=null)}}),Object.defineProperty(e.prototype,"checkFrustumVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.meshes&&this.meshes.forEach((function(t){e.camera.isInFrustum(t)?t.isVisible=!0:t.isVisible=!1}))}}),e}(),g=function(){function e(e,t){Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pickupSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"meshes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mesh=null,this.scene=e,this.pickupSound=new p.ABN("firstAidPickup","./audio/pickups/firstaid.mp3",this.scene,null,{volume:1,autoplay:!1}),this.camera=t}return Object.defineProperty(e.prototype,"CreateFirstAidPickup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","firstaid.glb")];case 1:return t=i.sent().meshes,t[1].checkCollisions=!0,this.mesh=t[0],t[0].scaling=new p.Pq0(-2.5,2.5,2.5),this.mesh.position=e,t[1].id="firstAid",[2]}}))}))}}),Object.defineProperty(e.prototype,"checkFrustumVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.meshes&&this.meshes.forEach((function(t){e.camera.isInFrustum(t)?t.isVisible=!0:t.isVisible=!1}))}}),e}(),w=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.name="Warrok",a.damage=12,a.scoreValue=100,a.attackSpeed=.4,a.attackSound=new p.ABN("shootSound","./audio/attack/mutant.mp3",a.scene,null,{volume:.6,autoplay:!1}),a.aggroRange=200,a.health=120,a}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateMonster",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,Promise,(function(){var t,i=this;return(0,b.YH)(this,(function(a){return this.createBoxCollider(),t=this.duplicate(this.level.instances.warrokAssetContainer,e),this.rootMesh.checkCollisions=!0,this.rootMesh.rotationQuaternion=null,this.rootMesh.position=e,this.collider.position=this.rootMesh.position.clone(),this.collider.position.y+=1,this.animationGroups=t.animationGroups,this.death=this.animationGroups[1],this.idle=this.animationGroups[2],this.punch=this.animationGroups[3],this.run=this.animationGroups[4],this.shot=this.animationGroups[5],this.walk=this.animationGroups[2],p.YDL.AddTagsTo(this.mesh,"enemy"),this.animationGroups[0].stop(),this.animationGroups[4].play(!0),this.runSpeed=.2,this.walkSpeed=.07,this.scene.registerBeforeRender((function(){i.rootMesh.position.x=i.collider.position.x,i.rootMesh.position.z=i.collider.position.z})),[2]}))}))}}),Object.defineProperty(t.prototype,"createBoxCollider",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.collider=p.PeD.CreateBox("collider",{height:1.5,width:1,depth:1},this.scene),this.collider.visibility=.3,this.collider.checkCollisions=!0,this.collider.isPickable=!1,this.collider.isVisible=!1}}),Object.defineProperty(t.prototype,"deathAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDead=!0,this.animationGroups[2].stop(),this.animationGroups[3].stop(),this.animationGroups[4].stop(),this.animationGroups[5].stop(),this.death.start(!1),this.collider.dispose(),this.remove()}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.start(!1)}}),Object.defineProperty(t.prototype,"shotAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isReacting=!0,this.shot.isPlaying||this.shot.play(!1),this.shot.onAnimationEndObservable.addOnce((function(){e.isReacting=!1}))}}),Object.defineProperty(t.prototype,"punchAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.animationGroups.forEach((function(e){e.stop()})),this.isAttacking=!0,this.punch.start(!1),this.punch.onAnimationEndObservable.addOnce((function(){e.isAttacking=!1}))}}),Object.defineProperty(t.prototype,"walkAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.walk.start(!1)}}),Object.defineProperty(t.prototype,"runAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.stop(),this.walk.stop();var e=this.animationGroups.some((function(e){return e.isPlaying}));e||this.run.start(!0)}}),Object.defineProperty(t.prototype,"duplicate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=e.instantiateModelsToScene(void 0,!1,{doNotInstantiate:!0});console.log(i),this.rootMesh=i.rootNodes[0],this.mesh=i.rootNodes[0].getChildMeshes()[0],this.rootMesh.setEnabled(!0),this.mesh.setEnabled(!0);for(var a=0,n=i.rootNodes;a<n.length;a++){var r=n[a];r instanceof p.VR0&&(r.position=t)}return i}}),t}(d),P=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.name="SkeletonZombie",a.damage=10,a.scoreValue=200,a.attackSpeed=.4,a.attackSound=new p.ABN("shootSound","./audio/attack/mutant.mp3",a.scene,null,{volume:.6,autoplay:!1}),a.aggroRange=200,a.health=200,a.transformNode=new p.VR0("RotationNode",a.scene),a.appliesDot=!0,a}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateMonster",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,Promise,(function(){var t,i=this;return(0,b.YH)(this,(function(a){return this.createBoxCollider(),t=this.duplicate(this.level.instances.skeletonZombieAssetContainer,e),this.rootMesh.checkCollisions=!0,this.rootMesh.rotationQuaternion=null,this.rootMesh.position=e,this.collider.position=this.rootMesh.position.clone(),this.collider.position.y+=1,this.animationGroups=t.animationGroups,this.death=this.animationGroups[1],this.idle=this.animationGroups[2],this.punch=this.animationGroups[3],this.run=this.animationGroups[4],this.shot=this.animationGroups[5],this.uppercut=this.animationGroups[3],this.walk=this.animationGroups[6],p.YDL.AddTagsTo(this.mesh,"enemy"),this.animationGroups[0].stop(),this.animationGroups[4].play(!0),this.runSpeed=.6,this.walkSpeed=.07,this.scene.registerBeforeRender((function(){i.rootMesh.position.x=i.collider.position.x,i.rootMesh.position.z=i.collider.position.z})),[2]}))}))}}),Object.defineProperty(t.prototype,"createBoxCollider",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.collider=p.PeD.CreateBox("collider",{height:1.5,width:1,depth:1},this.scene),this.collider.visibility=.3,this.collider.isVisible=!1,this.collider.checkCollisions=!0,this.collider.isPickable=!1}}),Object.defineProperty(t.prototype,"deathAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDead=!0,this.animationGroups[2].stop(),this.animationGroups[3].stop(),this.animationGroups[4].stop(),this.animationGroups[5].stop(),this.death.start(!1),this.collider.dispose(),this.remove()}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.start(!1)}}),Object.defineProperty(t.prototype,"shotAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isReacting=!0,this.shot.isPlaying||this.shot.play(!1),this.shot.onAnimationEndObservable.addOnce((function(){e.isReacting=!1}))}}),Object.defineProperty(t.prototype,"punchAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.animationGroups.forEach((function(e){e.stop()})),this.isAttacking=!0,this.punch.start(!1),this.punch.onAnimationEndObservable.addOnce((function(){e.isAttacking=!1}))}}),Object.defineProperty(t.prototype,"walkAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.walk.start(!1)}}),Object.defineProperty(t.prototype,"runAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.stop(),this.walk.stop();var e=this.animationGroups.some((function(e){return e.isPlaying}));e||this.run.start(!0)}}),Object.defineProperty(t.prototype,"duplicate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=e.instantiateModelsToScene(void 0,!1,{doNotInstantiate:!0});console.log(i),this.rootMesh=i.rootNodes[0],this.mesh=i.rootNodes[0].getChildMeshes()[0],this.rootMesh.setEnabled(!0),this.mesh.setEnabled(!0);for(var a=0,n=i.rootNodes;a<n.length;a++){var r=n[a];r instanceof p.VR0&&(r.position=t)}return i}}),t}(d),O=function(e){function t(t,i,a){var n=e.call(this,t,a)||this;return Object.defineProperty(n,"spellcast",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"spellParticles",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"isSpellCasting",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"spellInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"isVulnerable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"glowInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"glowLayer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"shockWaveSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"shockWaveCastSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"generateAddsInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.name="Boss",n.level=a,n.player=i,n.scoreValue=2e3,n.attackSpeed=.4,n.attackSound=new p.ABN("shootSound","./audio/attack/mutant.mp3",n.scene,null,{volume:.6,autoplay:!1}),n.shockWaveSound=new p.ABN("shockWaveSound","./audio/attack/shockwave.mp3",n.scene,null,{volume:3,autoplay:!1}),n.shockWaveCastSound=new p.ABN("shockWaveSound","./audio/attack/shockwaveCast.mp3",n.scene,null,{spatialSound:!0,volume:3,autoplay:!1}),n.aggroRange=200,n.health=35e3,n.damage=30,n.isSpellCasting=!1,n.isVulnerable=!0,n}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateMonster",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,Promise,(function(){var t,i=this;return(0,b.YH)(this,(function(a){return this.createBoxCollider(),this.collider.scaling=new p.Pq0(3,3,3),this.collider.isVisible=!1,t=this.duplicate(this.level.instances.bossAssetContainer,e),this.mesh.scaling=new p.Pq0(3,3,3),this.rootMesh.checkCollisions=!0,this.rootMesh.rotationQuaternion=null,this.rootMesh.position=e,this.collider.position=this.rootMesh.position.clone(),this.collider.position.y+=1,this.animationGroups=t.animationGroups,this.death=this.animationGroups[1],this.idle=this.animationGroups[2],this.punch=this.animationGroups[3],this.run=this.animationGroups[4],this.shot=this.animationGroups[5],this.uppercut=this.animationGroups[6],this.spellcast=this.animationGroups[6],this.walk=this.animationGroups[7],this.run.speedRatio=.2,p.YDL.AddTagsTo(this.mesh,"enemy"),this.animationGroups[0].stop(),this.animationGroups[4].play(!0),this.runSpeed=.1,this.walkSpeed=.07,this.scene.registerBeforeRender((function(){i.rootMesh.position.x=i.collider.position.x,i.rootMesh.position.z=i.collider.position.z})),this.loadParticleSystem(),this.startSpellcastingInterval(),this.startAddGeneration(),this.shockWaveCastSound.attachToMesh(this.mesh),[2]}))}))}}),Object.defineProperty(t.prototype,"createBoxCollider",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.collider=p.PeD.CreateBox("collider",{height:1.5,width:1,depth:1},this.scene),this.collider.visibility=.3,this.collider.checkCollisions=!0,this.collider.isPickable=!1}}),Object.defineProperty(t.prototype,"deathAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isDead=!0,this.animationGroups[2].stop(),this.animationGroups[3].stop(),this.animationGroups[4].stop(),this.animationGroups[5].stop(),this.death.start(!1),this.collider.dispose(),this.remove(),this.level.stopWaveSystem(),clearInterval(this.generateAddsInterval),this.death.onAnimationEndObservable.addOnce((function(){setTimeout((function(){e.player.firstPersonController.ui.createWinScreen(),e.player.firstPersonController.camera.detachControl()}),5e3)}))}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isSpellCasting||this.idle.start(!0)}}),Object.defineProperty(t.prototype,"shotAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.shot.isPlaying||this.shot.play(!1)}}),Object.defineProperty(t.prototype,"punchAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.animationGroups.forEach((function(e){e.stop()})),this.isAttacking=!0,this.punch.start(!1),this.punch.onAnimationEndObservable.addOnce((function(){e.isAttacking=!1}))}}),Object.defineProperty(t.prototype,"walkAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.walk.start(!1)}}),Object.defineProperty(t.prototype,"runAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.idle.stop(),this.walk.stop();var e=this.animationGroups.some((function(e){return e.isPlaying}));e||(this.run.speedRatio=.2,this.run.start(!0))}}),Object.defineProperty(t.prototype,"spellAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.animationGroups.forEach((function(e){e.stop()})),this.isSpellCasting=!0,this.spellcast.start(!1),this.spellParticles.start(),this.shockWaveCastSound.play(),this.spellcast.onAnimationEndObservable.addOnce((function(){e.isSpellCasting=!1,e.spellParticles.stop(),e.player.applyShockwave(),e.shockWaveCastSound.stop(),e.shockWaveSound.play()}))}}),Object.defineProperty(t.prototype,"loadParticleSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new p.okU("particles",2e3,this.scene);e.particleTexture=new p.gPd("./textures/particles/spark_05.png",this.scene),e.emitter=this.rootMesh,e.minEmitBox=new p.Pq0(1,0,1),e.maxEmitBox=new p.Pq0(1,0,1),e.createSphereEmitter(9),e.color1=new p.ov8(0,1,1,1),e.color2=new p.ov8(0,1,1,1),e.colorDead=new p.ov8(0,1,1,0),e.minSize=2,e.maxSize=4,e.minLifeTime=.2,e.maxLifeTime=.2,e.minInitialRotation=-Math.PI/3,e.maxInitialRotation=Math.PI/3,e.emitRate=70,e.blendMode=p.okU.BLENDMODE_ONEONE,this.spellParticles=e}}),Object.defineProperty(t.prototype,"move",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.states.DESTROYED){var t=e.position.subtract(this.rootMesh.position).length();t<=5&&!this.isSpellCasting?this.attackPlayer(e):t<=this.aggroRange&&!this.isSpellCasting&&this.followPlayer(e)}}}),Object.defineProperty(t.prototype,"followPlayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.run.speedRatio=.2,this.runAnimation(),this.states.ATTACKING=!1,this.states.FOLLOWING=!0;var t=e.position.subtract(this.rootMesh.position).normalize(),i=Math.atan2(-t.x,-t.z);this.rootMesh.rotation.y=i,this.collider.moveWithCollisions(t.multiplyByFloats(this.runSpeed,0,this.runSpeed))}}),Object.defineProperty(t.prototype,"attackPlayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this.states.FOLLOWING=!1,this.states.ATTACKING=!0,!this.attackTimer){var i=1e3/this.attackSpeed,a=function(){if(t.states.DESTROYED)return clearInterval(t.attackTimer),void(t.attackTimer=null);t.isPlayerInRange(e)&&e.health>0&&(e.health=Math.max(e.health-t.damage),t.appliesDot&&!e.hasDot&&e.applyDot(2,5e3),t.punchAnimation(),t.attackSound.play())};a(),this.attackTimer=setInterval(a,i)}}}),Object.defineProperty(t.prototype,"isPlayerInRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.position.subtract(this.rootMesh.position).length();return t<=5}}),Object.defineProperty(t.prototype,"startSpellcastingInterval",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.spellInterval=setInterval((function(){e.isSpellCasting||e.isDead||e.spellAnimation()}),15e3)}}),Object.defineProperty(t.prototype,"startVulnerabilityTimer",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.glowInterval=setInterval((function(){e.isVulnerable=!e.isVulnerable,e.isVulnerable?e.removeGlowEffect():e.addGlowEffect()}),1e4)}}),Object.defineProperty(t.prototype,"addGlowEffect",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.glowLayer=new p.VA("glow",this.scene),this.glowLayer.addIncludedOnlyMesh(this.rootMesh),this.glowLayer.intensity=3,this.glowLayer.glowColor=new p.v9j(0,1,1)}}),Object.defineProperty(t.prototype,"removeGlowEffect",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.glowLayer&&(this.glowLayer.dispose(),this.glowLayer=null)}}),Object.defineProperty(t.prototype,"generateAdds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t,i,a,n,r,o,s,l,u,c,h;return(0,b.YH)(this,(function(b){switch(b.label){case 0:t=-82,i=12,a=-8,n=115,r=0,b.label=1;case 1:return r<e+1?(o=Math.random()*(i-t)+t,s=Math.random()*(n-a)+a,l=new p.Pq0(o,.1,s),u=[m,P,w],c=u[Math.floor(Math.random()*u.length)],h=new c(this.scene,this.level),[4,h.CreateMonster(l)]):[3,4];case 2:b.sent(),this.level.firstPersonController.enemies.push(h),b.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))}}),Object.defineProperty(t.prototype,"startAddGeneration",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=45e3;this.generateAddsInterval=setInterval((function(){e.generateAdds(5)}),t)}}),Object.defineProperty(t.prototype,"duplicate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=e.instantiateModelsToScene(void 0,!1,{doNotInstantiate:!0});console.log(i),this.rootMesh=i.rootNodes[0],this.mesh=i.rootNodes[0].getChildMeshes()[0],this.rootMesh.setEnabled(!0),this.mesh.setEnabled(!0);for(var a=0,n=i.rootNodes;a<n.length;a++){var r=n[a];r instanceof p.VR0&&(r.position=t)}return i}}),t}(d),j=function(){function e(e,t){Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pickupSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"glowLayer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scoreValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"meshes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mesh=null,this.scene=e,this.scoreValue=100,this.pickupSound=new p.ABN("","./audio/pickups/torch.mp3",this.scene,null,{volume:2,autoplay:!1}),this.camera=t,this.glowLayer=new p.VA("glow",this.scene),this.glowLayer.intensity=1}return Object.defineProperty(e.prototype,"CreateTorchPowerup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return t=p.PeD.CreateSphere("sphereCollider",{diameter:.1},this.scene),t.isVisible=!1,t.visibility=.5,t.isPickable=!1,t.checkCollisions=!0,t.scaling=new p.Pq0(15,1,15),t.position=e.clone(),t.position.y+=.1,[4,p.cng.ImportMeshAsync("","./models/pickups/","torch.glb")];case 1:return i=n.sent().meshes,this.mesh=i[0],this.mesh.scaling=new p.Pq0(.3,.3,.3),this.mesh.position=e,a=new p.FUi("glowMaterial",this.scene),a.emissiveColor=new p.v9j(1,1,1),a.alpha=.5,this.mesh.material=a,this.mesh.setParent(t),t.id="torchPowerup",setTimeout((function(){t.dispose()}),2e4),[2]}}))}))}}),Object.defineProperty(e.prototype,"collectTorch",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.mesh&&this.mesh.parent&&(this.mesh.parent.dispose(),this.mesh=null)}}),Object.defineProperty(e.prototype,"checkFrustumVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.meshes&&this.meshes.forEach((function(t){t&&(e.camera.isInFrustum(t)?t.isVisible=!0:t.isVisible=!1)}))}}),e}(),S=function(){function e(e,t){Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pickupSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"glowLayer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scoreValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"meshes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mesh=null,this.scene=e,this.scoreValue=100,this.camera=t,this.pickupSound=new p.ABN("","./audio/pickups/ammobox.mp3",this.scene,null,{volume:1,autoplay:!1}),this.glowLayer=new p.VA("glow",this.scene),this.glowLayer.intensity=2}return Object.defineProperty(e.prototype,"CreateMedalPowerup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,void 0,(function(){var t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return t=p.PeD.CreateSphere("sphereCollider",{diameter:.1},this.scene),t.isVisible=!1,t.visibility=.5,t.isPickable=!1,t.scaling=new p.Pq0(28,1,28),t.position=e.clone(),t.checkCollisions=!0,[4,p.cng.ImportMeshAsync("","./models/pickups/","medal.glb")];case 1:return i=n.sent().meshes,this.mesh=i[0],this.mesh.scaling=new p.Pq0(.3,.3,.3),this.mesh.position=e,a=new p.FUi("glowMaterial",this.scene),a.emissiveColor=new p.v9j(1,1,1),a.alpha=.5,this.mesh.material=a,this.mesh.setParent(t),t.id="medalPowerup",setTimeout((function(){t.dispose()}),2e4),[2]}}))}))}}),Object.defineProperty(e.prototype,"collectMedal",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.mesh&&this.mesh.parent&&(this.mesh.parent.dispose(),this.mesh=null)}}),Object.defineProperty(e.prototype,"checkFrustumVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.meshes&&this.meshes.forEach((function(t){t&&(e.camera.isInFrustum(t)?t.isVisible=!0:t.isVisible=!1)}))}}),e}(),A=function(){function e(e){Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mutantRoot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mutantMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mutantSkeleton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mutantAnim",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mutantAssetContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"warrokAssetContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skeletonZombieAssetContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bossAssetContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.scene=e,this.CreateMutant(),this.CreateWarrok(),this.CreateSkeletonZombie(),this.CreateBoss()}return Object.defineProperty(e.prototype,"CreateMutant",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){var e;return(0,b.YH)(this,(function(t){switch(t.label){case 0:return e=this,[4,p.cng.LoadAssetContainerAsync("./models/","mutant2.glb",this.scene)];case 1:return e.mutantAssetContainer=t.sent(),this.mutantAssetContainer.addAllToScene(),this.mutantAssetContainer.meshes.forEach((function(e){e.setEnabled(!1)})),[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateWarrok",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){var e;return(0,b.YH)(this,(function(t){switch(t.label){case 0:return e=this,[4,p.cng.LoadAssetContainerAsync("./models/","warrokk.glb",this.scene)];case 1:return e.warrokAssetContainer=t.sent(),this.warrokAssetContainer.addAllToScene(),this.warrokAssetContainer.meshes.forEach((function(e){e.setEnabled(!1)})),[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateSkeletonZombie",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){var e;return(0,b.YH)(this,(function(t){switch(t.label){case 0:return e=this,[4,p.cng.LoadAssetContainerAsync("./models/","skelezombie.glb",this.scene)];case 1:return e.skeletonZombieAssetContainer=t.sent(),this.skeletonZombieAssetContainer.addAllToScene(),this.skeletonZombieAssetContainer.meshes.forEach((function(e){e.setEnabled(!1)})),[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateBoss",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){var e;return(0,b.YH)(this,(function(t){switch(t.label){case 0:return e=this,[4,p.cng.LoadAssetContainerAsync("./models/","maw.glb",this.scene)];case 1:return e.bossAssetContainer=t.sent(),this.bossAssetContainer.addAllToScene(),this.bossAssetContainer.meshes.forEach((function(e){e.setEnabled(!1)})),[2]}}))}))}}),e}(),k=i(1823),M=function(){function e(e,t){Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enemies",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstPersonController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"waveIntervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"waveNumber",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nextWaveTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enemyNumber",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"weaponPickups",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstaid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ammopickup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"torchPowerup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"medalPowerup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"meshes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"instances",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowGen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.engine=e,this.scene=this.CreateScene(),this.firstPersonController=t,this.waveNumber=0,this.nextWaveTime=60,this.engine.displayLoadingUI(),this.CreateEnvironment(),this.CreateImpostors(),this.createWall(new p.Pq0(-35,0,-13)),this.createWall(new p.Pq0(-35,0,122)),this.createHWall(new p.Pq0(12,0,55)),this.createHWall(new p.Pq0(-82,0,55)),this.weaponPickups=new v,this.ammopickup=new y(this.scene,this.firstPersonController.camera),this.firstaid=new g(this.scene,this.firstPersonController.camera),this.torchPowerup=new j(this.scene,this.firstPersonController.camera),this.medalPowerup=new S(this.scene,this.firstPersonController.camera),this.instances=new A(this.scene)}return Object.defineProperty(e.prototype,"getInitializedHavok",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){return(0,b.YH)(this,(function(e){switch(e.label){case 0:return[4,(0,k.A)()];case 1:return[2,e.sent()]}}))}))}}),Object.defineProperty(e.prototype,"CreateScene",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new p.Z58(this.engine),t=p.b4q.CreateFromPrefilteredData("./environment/environment.env",e);e.environmentTexture=t,e.createDefaultSkybox(t,!0),e.environmentIntensity=.7;var i=new p.ZyN("hemi",new p.Pq0(0,-1,0),this.scene);i.intensity=.1;var a=new p.ZyN("DirectionalLight",new p.Pq0(-2,-1.5,-2),this.scene);return a.intensity=3.5,a.shadowEnabled=!0,a.autoUpdateExtends=!0,a.autoCalcShadowZBounds=!0,this.shadowGen=new p.owA(1024,a),this.shadowGen.useBlurCloseExponentialShadowMap=!0,this.shadowGen.useKernelBlur=!0,this.shadowGen.blurKernel=64,this.shadowGen.blurScale=1,e.enablePhysics(new p.Pq0(0,-9.81,0),new p.OWR(!0,10,f)),e.collisionsEnabled=!0,e}}),Object.defineProperty(e.prototype,"CreateAsphalt",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new p.YOq("pbr",this.scene),t=new p.gPd("./textures/grass/grass_diff.png",this.scene);t.uScale=200,t.vScale=200,e.albedoTexture=t;var i=new p.gPd("./textures/grass/grass_norm.png",this.scene);i.uScale=200,i.vScale=200,e.bumpTexture=i,e.invertNormalMapX=!0,e.invertNormalMapY=!0;var a=new p.gPd("./textures/grass/grass_arm.jpg",this.scene);return a.uScale=200,a.vScale=200,e.metallicTexture=a,e._useAmbientOcclusionFromMetallicTextureRed=!0,e.useRoughnessFromMetallicTextureGreen=!0,e.useMetallnessFromMetallicTextureBlue=!0,e}}),Object.defineProperty(e.prototype,"CreateEnvironment",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,Promise,(function(){var e,t,i,a=this;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","stadetest8.glb",this.scene)];case 1:return e=n.sent().meshes,e.forEach((function(e){e.isPickable=!1,a.shadowGen.addShadowCaster(e),e.receiveShadows=!0,"Doors"!==e.name&&"Stairs"!==e.name&&"Gates"!==e.name&&"Entrance Steps"!==e.name&&"End Terraces"!==e.name&&"Dividers"!==e.name&&"Doorknobs"!==e.name&&"Door Handles"!==e.name&&"Door Frames."!==e.name&&"Ground Level"!==e.name&&"Flag Pole Bases"!==e.name&&"Pressbox"!==e.name&&"Gates 02"!==e.name||(e.isVisible=!1),"Fence"!==e.name&&"Lines"!==e.name&&"Plane.005"!==e.name&&"Ramps"!==e.name||(e.isPickable=!0)})),this.meshes=e,t=p.PeD.CreateGround("ground",{width:250,height:250},this.scene),i=this.CreateAsphalt(),t.position=new p.Pq0(-35,.05,55),t.material=i,t.checkCollisions=!0,t.receiveShadows=!0,t.physicsImpostor=new p.jat(t,p.jat.BoxImpostor,{mass:0,restitution:0}),new p.ABN("backgroundMusic","./audio/background4.mp3",this.scene,null,{volume:.01,autoplay:!0,loop:!0}),[2]}}))}))}}),Object.defineProperty(e.prototype,"generateEnemies",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,b.sH)(this,void 0,Promise,(function(){var t,i,a,n,r,o,s,l,u,c,h,d;return(0,b.YH)(this,(function(b){switch(b.label){case 0:this.waveNumber+=1,t=-81,i=11,a=-7,n=114,2==this.waveNumber&&(this.firstPersonController.inventory.push(this.firstPersonController.rifle),this.weaponPickups.CreateRiflePickup(new p.Pq0(Math.random()*(i-t)+t,.1,Math.random()*(n-a)+a))),4==this.waveNumber&&(this.firstPersonController.inventory.push(this.firstPersonController.lmg),this.weaponPickups.CreateLMGPickup(new p.Pq0(Math.random()*(i-t)+t,.1,Math.random()*(n-a)+a))),7==this.waveNumber&&(this.firstPersonController.inventory.push(this.firstPersonController.minigun),this.weaponPickups.CreateMinigunPickup(new p.Pq0(Math.random()*(i-t)+t,.1,Math.random()*(n-a)+a))),s=0,b.label=1;case 1:return s<e+2?(u=Math.random()*(i-t)+t,c=Math.random()*(n-a)+a,h=new p.Pq0(u,.1,c),r=new m(this.scene,this),[4,r.CreateMonster(h)]):[3,4];case 2:b.sent(),this.firstPersonController.enemies.push(r),b.label=3;case 3:return s++,[3,1];case 4:if(!(this.waveNumber>=2))return[3,8];s=0,b.label=5;case 5:return s<e-2+1?(u=Math.random()*(i-t)+t,c=Math.random()*(n-a)+a,h=new p.Pq0(u,.1,c),o=new w(this.scene,this),[4,o.CreateMonster(h)]):[3,8];case 6:b.sent(),this.firstPersonController.enemies.push(o),b.label=7;case 7:return s++,[3,5];case 8:if(!(this.waveNumber>=4))return[3,12];s=0,b.label=9;case 9:return s<e-2+1?(u=Math.random()*(i-t)+t,c=Math.random()*(n-a)+a,h=new p.Pq0(u,.1,c),l=new P(this.scene,this),[4,l.CreateMonster(h)]):[3,12];case 10:b.sent(),this.firstPersonController.enemies.push(l),b.label=11;case 11:return s++,[3,9];case 12:return 8!==this.waveNumber?[3,14]:(this.stopWaveSystem(),this.nextWaveTime=0,u=Math.random()*(i-t)+t,c=Math.random()*(n-a)+a,h=new p.Pq0(u,.1,c),d=new O(this.scene,this.firstPersonController.player,this),[4,d.CreateMonster(h)]);case 13:b.sent(),this.firstPersonController.enemies.push(d),b.label=14;case 14:return[2]}}))}))}}),Object.defineProperty(e.prototype,"startWaveSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.waveIntervalId=setInterval((function(){e.generateEnemies(e.waveNumber),e.nextWaveTime=60}),6e4),setInterval((function(){e.nextWaveTime>0&&(e.nextWaveTime-=1)}),1e3),this.startPickupGeneration()}}),Object.defineProperty(e.prototype,"stopWaveSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0!==this.waveIntervalId&&clearInterval(this.waveIntervalId)}}),Object.defineProperty(e.prototype,"startPickupGeneration",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=-82,i=12,a=-8,n=115,r=.1,o=.2;setInterval((function(){e.ammopickup.CreateAmmoPickup(new p.Pq0(Math.random()*(i-t)+t,.1,Math.random()*(n-a)+a))}),6e4),setInterval((function(){e.firstaid.CreateFirstAidPickup(new p.Pq0(Math.random()*(i-t)+t,.1,Math.random()*(n-a)+a))}),6e4),setInterval((function(){e.torchPowerup.CreateTorchPowerup(new p.Pq0(Math.random()*(i-t)+t,Math.random()*(o-r)+r,Math.random()*(n-a)+a))}),2e4),setInterval((function(){e.medalPowerup.CreateMedalPowerup(new p.Pq0(Math.random()*(i-t)+t,Math.random()*(o-r)+r,Math.random()*(n-a)+a))}),2e4)}}),Object.defineProperty(e.prototype,"createWall",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=95,i=5,a=.5,n=e,r=p.PeD.CreateBox("wall",{width:t,height:i,depth:a},this.scene);r.position=n;var o=new p.FUi("wallMaterial",this.scene);o.diffuseColor=new p.v9j(.5,.5,.5),r.material=o,r.physicsImpostor=new p.jat(r,p.jat.BoxImpostor,{mass:0,restitution:0,friction:0},this.scene),r.checkCollisions=!0,r.isVisible=!1}}),Object.defineProperty(e.prototype,"createHWall",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=135,i=15,a=.5,n=e,r=p.PeD.CreateBox("wall",{width:t,height:i,depth:a},this.scene);r.position=n,r.rotation.y=Math.PI/2;var o=new p.FUi("wallMaterial",this.scene);o.diffuseColor=new p.v9j(.5,.5,.5),r.material=o,r.physicsImpostor=new p.jat(r,p.jat.BoxImpostor,{mass:0,restitution:0,friction:0},this.scene),r.checkCollisions=!0,r.isVisible=!1}}),Object.defineProperty(e.prototype,"CreateTorch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){var e,t;return(0,b.YH)(this,(function(i){switch(i.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/pickups/","torch.glb")];case 1:return e=i.sent(),t=e.meshes,e.animationGroups,t[0].position=new p.Pq0(-25,.5,50),[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateImpostors",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=p.PeD.CreateGround("groundImpostor",{width:200,height:200});e.isVisible=!1,e.position.y+=.05,e.physicsImpostor=new p.jat(e,p.jat.BoxImpostor,{mass:0,restitution:0}),this.firstPersonController.ground=e}}),Object.defineProperty(e.prototype,"CreateTrack",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){var e;return(0,b.YH)(this,(function(t){switch(t.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","runtrack.glb",this.scene)];case 1:return e=t.sent().meshes,e.forEach((function(e){e.receiveShadows=!0,e.position.y=.9})),[2]}}))}))}}),Object.defineProperty(e.prototype,"checkFrustumVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.meshes&&this.meshes.forEach((function(t){e.firstPersonController.camera.isInFrustum(t)?t.isVisible=!0:t.isVisible=!1}))}}),Object.defineProperty(e.prototype,"CreateLights",{enumerable:!1,configurable:!0,writable:!0,value:function(){new p.ZyN("DirectionalLight",new p.Pq0(-1,-2,-1),this.scene)}}),Object.defineProperty(e.prototype,"CreateGizmos",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=new p.h9J;t.scaleRatio=2,t.light=e;var i=new p.eaF("dummyMesh",this.scene);i.position=new p.Pq0(-30,2,65),t.attachedMesh=i;var a=new p.u47(this.scene);a.positionGizmoEnabled=!0,a.rotationGizmoEnabled=!0,a.usePointerToAttachGizmos=!1,a.attachToMesh(i)}}),e}(),C=function(){function e(e,t,i,a,n){Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationGroups",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isFiring",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isReloading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gunMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gunMeshChild",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ammo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reloadAmmo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enemies",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bulletHoleMaterial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shootSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"emptySound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reloadSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"readySound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isMeshCreated",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toggleAutomatic",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fireRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"muzzleFlashParticleSystem",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isShootingAnimationPlaying",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isReadying",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"damage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.camera=t,this.scene=e,this.player=a,this.canvas=n,this.isFiring=!1,this.isReloading=!1,this.isReadying=!1,this.ammo=30,this.enemies=i,this.reloadAmmo=90,this.loadBulletholes(),this.fireRate=100,this.damage=15,this.isShootingAnimationPlaying=!1}return Object.defineProperty(e.prototype,"CreateG",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,Promise,(function(){var e,t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","rifle.glb")];case 1:return e=n.sent(),t=e.meshes,i=e.animationGroups,this.gunMeshChild=t[1],a=new p.VR0("glb"),t[0].parent=a,t[0].isVisible=!0,t[0].renderingGroupId=100,this.gunMesh=t[0],190,250,this.animationGroups=i,i.forEach((function(e){e.stop(),e.start(!0,.3,397,458)})),a.parent=this.camera,a.position.y-=.2,a.position.z+=.6,a.position.x+=.32,a.scaling.set(.01,.01,.01),this.CreateCrosshair(),this.shootSound=new p.ABN("shootSound","./audio/shoot.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.shootSound.attachToMesh(this.gunMesh),this.emptySound=new p.ABN("emptySound","./audio/empty.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.emptySound.attachToMesh(this.gunMesh),this.reloadSound=new p.ABN("reloadSound","./audio/reload.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.reloadSound.attachToMesh(this.gunMesh),this.readySound=new p.ABN("reloadSound","./audio/weapons/readyRifle2.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.readySound.attachToMesh(this.gunMesh),this.createMuzzleFlashParticleSystem(),this.isMeshCreated=!0,[2]}}))}))}}),Object.defineProperty(e.prototype,"CreateCrosshair",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=1,t=p.PeD.CreatePlane("crosshair",{size:e}),i=new p.FUi("crossHairMaterial",this.scene);t.material=i;var a=new p.gPd("./textures/crosshair.png",this.scene);return i.diffuseTexture=a,i.diffuseColor=p.v9j.White(),i.opacityTexture=i.diffuseTexture,i.transparencyMode=p.imn.MATERIAL_ALPHABLEND,i.alpha=1,a.hasAlpha=!0,t.parent=this.camera,t.position.z=1,t.scaling=new p.Pq0(.075,.075,.075),t.checkCollisions=!1,t.isPickable=!1,t}}),Object.defineProperty(e.prototype,"shootAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.animationGroups.forEach((function(t){t.stop(),t.start(!1,.85,0,16),e.isFiring=!0,e.muzzleFlashParticleSystem&&(e.muzzleFlashParticleSystem.start(),setTimeout((function(){e.muzzleFlashParticleSystem.stop()}),10)),t.onAnimationEndObservable.addOnce((function(){e.idleAnimation(e)}))}))}}),Object.defineProperty(e.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.player.isDead()||!e.isFiring&&e.isReloading||(e.animationGroups.forEach((function(e){e.stop(),e.start(!0,.3,397,458)})),e.isFiring=!1)}}),Object.defineProperty(e.prototype,"reloadAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isReloading=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,16,176),t.onAnimationEndObservable.addOnce((function(){e.isReloading=!1,e.idleAnimation(e)}))}))}}),Object.defineProperty(e.prototype,"readyAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,320,396),t.onAnimationEndObservable.addOnce((function(){e.idleAnimation(e)}))}))}}),Object.defineProperty(e.prototype,"readySfx",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.readySound.play()}}),Object.defineProperty(e.prototype,"shoot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.ammo>0&&!this.isReloading){this.shootSound.play();var t=Math.random()*Math.PI*2,i=.04*Math.random(),a=new p.Pq0(Math.cos(t)*i,0,Math.sin(t)*i),n=(this.camera.getForwardRay().direction.add(a),this.scene.createPickingRay(this.canvas.clientWidth/2,this.canvas.clientHeight/2,null,this.camera)),r=this.scene.pickWithRay(n);if(r&&r.hit){if(p.YDL.MatchesQuery(r.pickedMesh,"enemy")){var o=this.getEnemyFromMesh(r.pickedMesh);o&&(o.health-=this.damage,o.health>0&&this.playShotAnimation(o),o.health<=0&&(o.states.DESTROYED||(this.player.score+=o.scoreValue,this.playDeathAnimation(o),o.death.onAnimationEndObservable.addOnce((function(){if(o){var t=e.enemies.indexOf(o);-1!==t&&e.enemies.splice(t,1);var i=e.player.firstPersonController.enemies.indexOf(o);-1!==i&&e.player.firstPersonController.enemies.splice(i,1)}})),o.states.DESTROYED=!0)))}var s=.1,l=p.PeD.CreateDecal("decal",r.pickedMesh,{position:r.pickedPoint,normal:r.getNormal(!0),size:new p.Pq0(s,s,s)});l.material=this.bulletHoleMaterial,setTimeout((function(){l.dispose()}),1e4)}this.ammo-=1}}}),Object.defineProperty(e.prototype,"reloadWeapon",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.ammo,t=Math.min(30-e,this.reloadAmmo);this.ammo+=t,this.reloadAmmo-=t}}),Object.defineProperty(e.prototype,"playShotAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.shotAnimation()}}),Object.defineProperty(e.prototype,"playDeathAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.deathAnimation()}}),Object.defineProperty(e.prototype,"getEnemyFromMesh",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=0,i=this.enemies;t<i.length;t++){var a=i[t];if(a.mesh===e)return a}}}),Object.defineProperty(e.prototype,"loadBulletholes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){return(0,b.YH)(this,(function(e){return this.bulletHoleMaterial=new p.YOq("bulletHoleMaterial",this.scene),this.bulletHoleMaterial.albedoTexture=new p.gPd("textures/bullet_hole.png",this.scene),this.bulletHoleMaterial.albedoTexture.hasAlpha=!0,this.bulletHoleMaterial.zOffset=-.25,this.bulletHoleMaterial.roughness=.5,[2]}))}))}}),Object.defineProperty(e.prototype,"createMuzzleFlashParticleSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.muzzleFlashParticleSystem=new p.okU("muzzleFlash",200,this.scene);var e=new p.gPd("./textures/particles/muzzle_05.png",this.scene);e._parentContainer=this.gunMesh,this.muzzleFlashParticleSystem.particleTexture=e,this.muzzleFlashParticleSystem.emitter=this.gunMesh,this.muzzleFlashParticleSystem.minEmitBox=new p.Pq0(15,14,100),this.muzzleFlashParticleSystem.maxEmitBox=new p.Pq0(15,14,100),this.muzzleFlashParticleSystem.color1=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.color2=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.colorDead=new p.ov8(1,.5,0,1),this.muzzleFlashParticleSystem.minSize=.3,this.muzzleFlashParticleSystem.maxSize=.6,this.muzzleFlashParticleSystem.minLifeTime=.01,this.muzzleFlashParticleSystem.maxLifeTime=.01,this.muzzleFlashParticleSystem.emitRate=10,this.muzzleFlashParticleSystem.start(),this.muzzleFlashParticleSystem.stop()}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.gunMesh&&(this.gunMesh.dispose(),this.gunMesh=null)}}),Object.defineProperty(e.prototype,"preloadMesh",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,Promise,(function(){return(0,b.YH)(this,(function(e){switch(e.label){case 0:return this.isMeshCreated?[3,2]:[4,this.CreateG()];case 1:e.sent(),this.gunMesh&&this.gunMesh.setEnabled(!1),e.label=2;case 2:return[2]}}))}))}}),e}(),T=function(){function e(e,t,i){Object.defineProperty(this,"health",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"healthView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHealth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stamina",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxStamina",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"score",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasDot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"jumpingPower",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"staminaRegenRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"staminaDecayRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sprintSpeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"walkSpeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstPersonController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDecaying",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isRegenerating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"decayInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"regenInterval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outOfBreath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.health=100,this.maxHealth=100,this.stamina=100,this.maxStamina=100,this.camera=e,this.scene=t,this.firstPersonController=i,this.hasDot=!1,this.score=0,this.jumpingPower=5,this.staminaRegenRate=5,this.staminaDecayRate=10,this.sprintSpeed=3,this.walkSpeed=1.5,this.outOfBreath=new p.ABN("firstAidPickup","./audio/player/outofbreath.mp3",this.scene,null,{volume:1,autoplay:!1})}return Object.defineProperty(e.prototype,"updatePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.position=e.position}}),Object.defineProperty(e.prototype,"screenJerk",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===e&&(e=100),void 0===t&&(t=5);var i=document.createElement("div");i.id="glow-overlay",document.body.appendChild(i),setTimeout((function(){document.body.removeChild(i)}),e)}}),Object.defineProperty(e.prototype,"isDead",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.health<=0}}),Object.defineProperty(e.prototype,"applyDot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var i=this,a=e;this.hasDot=!0;var n=setInterval((function(){i.health=Math.max(i.health-a,0),t-=1e3,t<=0&&(clearInterval(n),i.hasDot=!1)}),1e3)}}),Object.defineProperty(e.prototype,"applyShockwave",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.walkSpeed,i=this.sprintSpeed;this.walkSpeed*=.5,this.sprintSpeed*=.5,this.firstPersonController.applyShockwave(),setTimeout((function(){e.walkSpeed=t,e.sprintSpeed=i}),6e3),this.health=Math.max(0,this.health-20),this.firstPersonController.playerBox.applyImpulse(new p.Pq0(0,4,0),this.firstPersonController.playerBox.getAbsolutePosition())}}),Object.defineProperty(e.prototype,"decayStamina",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isRegenerating=!1,this.isDecaying||this.isRegenerating||(clearInterval(this.regenInterval),this.decayInterval=setInterval((function(){e.stamina=Math.max(0,e.stamina-e.staminaDecayRate),0===e.stamina&&(e.outOfBreath.play(),clearInterval(e.decayInterval))}),1e3),this.isDecaying=!0)}}),Object.defineProperty(e.prototype,"regenStamina",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isDecaying=!1,this.isRegenerating||this.isDecaying||(clearInterval(this.decayInterval),this.regenInterval=setInterval((function(){e.stamina=Math.min(e.maxStamina,e.stamina+e.staminaRegenRate),e.stamina===e.maxStamina&&clearInterval(e.regenInterval)}),1e3),this.isRegenerating=!0)}}),e}(),E=i(4759),z=function(){function e(e,t,i,a,n){Object.defineProperty(this,"ammoTextBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"healthBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"staminaBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"weapon",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"healthBar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"staminaBar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inventory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentWeaponIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"coordinatesBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scoreBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"waveBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"waveTimeBlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"deathScreen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"restartButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showDeathScreen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showWinScreen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"winScreen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pauseMenu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"unpauseButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.player=e,this.weapon=t,this.inventory=i,this.currentWeaponIndex=a,this.showDeathScreen=!1,this.showWinScreen=!1,this.level=n,this.loadText(),this.createPauseUI()}return Object.defineProperty(e.prototype,"loadText",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=E.vs.CreateFullscreenUI("UI"),t=new E.tN;t.width="22%",t.height="15%",t.background="rgba(0, 0, 0, 0.45)",t.cornerRadius=20,t.thickness=2,t.color="white",t.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,t.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,t.top="80%",t.left="20%",e.addControl(t),this.ammoTextBlock=new E.VJ,this.ammoTextBlock.color="rgb(0, 255, 0)",this.ammoTextBlock.fontFamily="Consolas",this.ammoTextBlock.fontWeight="bold",this.ammoTextBlock.fontSize="36vw",t.addControl(this.ammoTextBlock),this.updateAmmoText();var i=new E.tN;i.width="15%",i.height="15%",i.background="rgba(0, 0, 0, 0.45)",i.cornerRadius=20,i.thickness=2,i.color="white",i.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,i.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,i.top="80%",i.left="3%",e.addControl(i),this.healthBlock=new E.VJ,this.healthBlock.color="rgb(0, 255, 0)",this.healthBlock.fontFamily="Consolas",this.healthBlock.fontWeight="bold",this.healthBlock.fontSize="36vw",i.addControl(this.healthBlock),this.updatePlayerHP(),this.staminaBar=new E.tN,this.staminaBar.width="350px",this.staminaBar.height="15px",this.staminaBar.cornerRadius=20,this.staminaBar.thickness=1,this.staminaBar.background="cyan",this.staminaBar.color="black",this.staminaBar.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,this.staminaBar.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,this.staminaBar.top="75%",this.staminaBar.left="5%",this.staminaBar.shadowBlur=5,this.staminaBar.shadowOffsetX=2,this.staminaBar.shadowOffsetY=2,this.staminaBar.shadowColor="#000000",e.addControl(this.staminaBar),this.updateStaminaText();var a=new E.tN;a.width="520px",a.height="90px",a.background="rgba(0, 0, 0, 0.45)",a.cornerRadius=20,a.thickness=2,a.color="white",a.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,a.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,a.top="1%",a.left="25%",e.addControl(a),this.scoreBlock=new E.VJ,this.scoreBlock.color="rgb(0, 255, 0)",this.scoreBlock.fontFamily="Consolas",this.scoreBlock.fontWeight="bold",this.scoreBlock.fontSize="18vw",this.scoreBlock.text="Score: ",this.scoreBlock.textHorizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,this.scoreBlock.textVerticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,this.scoreBlock.top="53px",this.scoreBlock.left="200px",a.addControl(this.scoreBlock),this.waveBlock=new E.VJ,this.waveBlock.color="rgb(0, 255, 0)",this.waveBlock.fontFamily="Consolas",this.waveBlock.fontWeight="bold",this.waveBlock.fontSize=18,this.waveBlock.text="Wave: ",this.waveBlock.textHorizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,this.waveBlock.textVerticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,this.waveBlock.top="5px",this.waveBlock.left="200px",a.addControl(this.waveBlock),this.waveTimeBlock=new E.VJ,this.waveTimeBlock.color="rgb(0, 255, 0)",this.waveTimeBlock.fontFamily="Consolas",this.waveTimeBlock.fontWeight="bold",this.waveTimeBlock.fontSize=18,this.waveTimeBlock.text="Prochaine vague: ",this.waveTimeBlock.textHorizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_LEFT,this.waveTimeBlock.textVerticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,this.waveTimeBlock.top="30px",this.waveTimeBlock.left="120px",a.addControl(this.waveTimeBlock)}}),Object.defineProperty(e.prototype,"createPauseUI",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=E.vs.CreateFullscreenUI("UI");this.pauseMenu=new E.tN,this.pauseMenu.width=.5,this.pauseMenu.height=.5,this.pauseMenu.background="black",this.pauseMenu.alpha=.8,this.pauseMenu.isVisible=!1,e.addControl(this.pauseMenu);var t=new E.VJ;t.text="Paused",t.color="white",t.fontSize=40,this.pauseMenu.addControl(t),this.unpauseButton=E.$n.CreateSimpleButton("unpauseButton","Unpause"),this.unpauseButton.width="150px",this.unpauseButton.height="50px",this.unpauseButton.color="white",this.unpauseButton.background="gray",this.unpauseButton.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_BOTTOM,this.unpauseButton.top="-10px",this.pauseMenu.addControl(this.unpauseButton)}}),Object.defineProperty(e.prototype,"showPauseScreen",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.pauseMenu&&(this.pauseMenu.isVisible=!0)}}),Object.defineProperty(e.prototype,"hidePauseScreen",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.pauseMenu&&(this.pauseMenu.isVisible=!1)}}),Object.defineProperty(e.prototype,"updateAmmoText",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.ammoTextBlock.text=this.weapon.ammo.toString()+" | "+this.weapon.reloadAmmo.toString()}}),Object.defineProperty(e.prototype,"updateHealthBar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.player.health/this.player.maxHealth;e.width="".concat(290*t,"px"),e.background=this.healthBlock.color}}),Object.defineProperty(e.prototype,"updatePlayerHP",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.player.health;this.healthBlock.text=e.toString();var t="";if(e>50){var i=Math.floor(255-5.1*(e-50)),a=255;t="rgb(".concat(i,",").concat(a,",0)")}else{a=Math.floor(5.1*e),i=255;t="rgb(".concat(i,",").concat(a,",0)")}this.healthBlock.color=t}}),Object.defineProperty(e.prototype,"updateStaminaText",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.player.stamina/this.player.maxStamina;this.staminaBar.width="".concat(33*e,"%")}}),Object.defineProperty(e.prototype,"updatePlayerScore",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.scoreBlock.text="Score: ".concat(this.player.score)}}),Object.defineProperty(e.prototype,"updateWaveNumber",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.waveBlock.text="Vague: ".concat(this.level.waveNumber)}}),Object.defineProperty(e.prototype,"updateWaveTimer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.waveTimeBlock.text="Prochaine vague: ".concat(this.level.nextWaveTime," secondes.")}}),Object.defineProperty(e.prototype,"createDeathScreen",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(!this.showDeathScreen){var t=E.vs.CreateFullscreenUI("UI");this.deathScreen=new E.tN,this.deathScreen.width="100%",this.deathScreen.height="100%",this.deathScreen.background="rgba(255, 0, 0, 0.5)",this.deathScreen.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,this.deathScreen.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_CENTER,t.addControl(this.deathScreen);var i=new E.VJ;i.text="Vous êtes mort",i.color="white",i.fontSize=32,i.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,i.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,i.top="-100px",this.deathScreen.addControl(i);var a=new E.VJ;a.text="Score: "+this.player.score,a.color="white",a.fontSize=24,a.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,a.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,a.top="-50px",this.deathScreen.addControl(a),this.restartButton=E.$n.CreateSimpleButton("restartButton","Rejouer"),this.restartButton.width="200px",this.restartButton.height="50px",this.restartButton.color="white",this.restartButton.background="black",this.restartButton.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,this.restartButton.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_CENTER,this.restartButton.onPointerUpObservable.add((function(){t.removeControl(e.deathScreen),location.reload()})),this.deathScreen.addControl(this.restartButton),this.showDeathScreen=!0,this.level.stopWaveSystem()}}}),Object.defineProperty(e.prototype,"createWinScreen",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(!this.showWinScreen){var t=E.vs.CreateFullscreenUI("UI");this.winScreen=new E.tN,this.winScreen.width="100%",this.winScreen.height="100%",this.winScreen.background="rgba(0, 255, 0, 0.5)",this.winScreen.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,this.winScreen.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_CENTER,t.addControl(this.winScreen);var i=new E.VJ;i.text="Vous avez gagné!",i.color="white",i.fontSize=32,i.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,i.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,i.top="-100px",this.winScreen.addControl(i);var a=new E.VJ;a.text="Score: "+this.player.score,a.color="white",a.fontSize=24,a.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,a.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_TOP,a.top="-50px",this.winScreen.addControl(a),this.restartButton=E.$n.CreateSimpleButton("restartButton","Rejouer"),this.restartButton.width="200px",this.restartButton.height="50px",this.restartButton.color="white",this.restartButton.background="black",this.restartButton.horizontalAlignment=E.Ec.HORIZONTAL_ALIGNMENT_CENTER,this.restartButton.verticalAlignment=E.Ec.VERTICAL_ALIGNMENT_CENTER,this.restartButton.onPointerUpObservable.add((function(){t.removeControl(e.winScreen),location.reload()})),this.winScreen.addControl(this.restartButton),this.showWinScreen=!0,this.level.stopWaveSystem()}}}),e}(),x=function(e){function t(t,i,a,n,r){var o=e.call(this,t,i,a,n,r)||this;return Object.defineProperty(o,"isFiring",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isReloading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"ammo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"reloadAmmo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"canFire",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"currentFireRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"muzzleFlashParticleSystem",{enumerable:!0,configurable:!0,writable:!0,value:null}),o.isFiring=!1,o.isReloading=!1,o.ammo=50,o.reloadAmmo=600,o.fireRate=100,o.canFire=!0,o.currentFireRate=0,o.toggleAutomatic=!0,o.damage=15,o.loadBulletholes(),o}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateG",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,Promise,(function(){var e,t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","m60.glb")];case 1:return e=n.sent(),t=e.meshes,i=e.animationGroups,this.gunMeshChild=t[1],a=new p.VR0("glb"),t[0].parent=a,t[0].isVisible=!0,t[0].renderingGroupId=100,this.gunMesh=t[0],190,250,this.animationGroups=i,i.forEach((function(e){e.stop(),e.start(!0,.5,755,850)})),a.parent=this.camera,a.position.y-=.2,a.position.z+=.5,a.position.x+=.32,a.scaling.set(1,1,1),this.CreateCrosshair(),this.shootSound=new p.ABN("shootSound","./audio/lmgfire1.wav",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.shootSound.attachToMesh(this.gunMesh),this.emptySound=new p.ABN("emptySound","./audio/empty.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.emptySound.attachToMesh(this.gunMesh),this.reloadSound=new p.ABN("reloadSound","./audio/LMGreload.wav",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.reloadSound.attachToMesh(this.gunMesh),this.readySound=new p.ABN("reloadSound","./audio/weapons/readyLMG2.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.readySound.attachToMesh(this.gunMesh),this.createMuzzleFlashParticleSystem(),this.isMeshCreated=!0,[2]}}))}))}}),Object.defineProperty(t.prototype,"CreateCrosshair",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=1,t=p.PeD.CreatePlane("crosshair",{size:e}),i=new p.FUi("crossHairMaterial",this.scene);t.material=i;var a=new p.gPd("./textures/crosshair.png",this.scene);return i.diffuseTexture=a,i.diffuseColor=p.v9j.White(),i.opacityTexture=i.diffuseTexture,i.transparencyMode=p.imn.MATERIAL_ALPHABLEND,i.alpha=1,a.hasAlpha=!0,t.parent=this.camera,t.position.z=1,t.scaling=new p.Pq0(.075,.075,.075),t.checkCollisions=!1,t.isPickable=!1,t}}),Object.defineProperty(t.prototype,"shootAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1.5,0,21),e.muzzleFlashParticleSystem&&(e.muzzleFlashParticleSystem.start(),setTimeout((function(){e.muzzleFlashParticleSystem.stop()}),10)),t.onAnimationEndObservable.addOnce((function(){e.isFiring=!0,e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.player.isDead()||!e.isFiring&&e.isReloading||(e.animationGroups.forEach((function(e){e.stop(),e.start(!0,.5,755,850)})),e.isFiring=!1)}}),Object.defineProperty(t.prototype,"reloadAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isReloading=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,16,320),t.onAnimationEndObservable.addOnce((function(){e.isReloading=!1,e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"readyAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,660,754),t.onAnimationEndObservable.addOnce((function(){e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"shoot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.canFire&&!this.isReloading&&this.ammo>0){this.shootSound.play();var t=Math.random()*Math.PI*2,i=.04*Math.random(),a=new p.Pq0(Math.cos(t)*i,0,Math.sin(t)*i),n=this.camera.getForwardRay().direction.add(a),r=this.scene.createPickingRay(this.canvas.clientWidth/2,this.canvas.clientHeight/2,null,this.camera);r.direction=n;var o=this.scene.pickWithRay(r);if(o&&o.hit){if(p.YDL.MatchesQuery(o.pickedMesh,"enemy")){var s=this.getEnemyFromMesh(o.pickedMesh);s&&(s.health-=this.damage,s.health>0&&this.playShotAnimation(s),s.health<=0&&(s.states.DESTROYED||(this.player.score+=s.scoreValue,this.playDeathAnimation(s),s.death.onAnimationEndObservable.addOnce((function(){if(s){var t=e.enemies.indexOf(s);-1!==t&&e.enemies.splice(t,1);var i=e.player.firstPersonController.enemies.indexOf(s);-1!==i&&e.player.firstPersonController.enemies.splice(i,1)}})),s.states.DESTROYED=!0)))}var l=.1,u=p.PeD.CreateDecal("decal",o.pickedMesh,{position:o.pickedPoint,normal:o.getNormal(!0),size:new p.Pq0(l,l,l)});u.material=this.bulletHoleMaterial,setTimeout((function(){u.dispose()}),1e4)}this.ammo-=1}}}),Object.defineProperty(t.prototype,"reloadWeapon",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.ammo,t=Math.min(50-e,this.reloadAmmo);this.ammo+=t,this.reloadAmmo-=t}}),Object.defineProperty(t.prototype,"getEnemyFromMesh",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=0,i=this.enemies;t<i.length;t++){var a=i[t];if(a.mesh===e)return a}}}),Object.defineProperty(t.prototype,"loadBulletholes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){return(0,b.YH)(this,(function(e){return this.bulletHoleMaterial=new p.YOq("bulletHoleMaterial",this.scene),this.bulletHoleMaterial.albedoTexture=new p.gPd("textures/bullet_hole.png",this.scene),this.bulletHoleMaterial.albedoTexture.hasAlpha=!0,this.bulletHoleMaterial.zOffset=-.25,this.bulletHoleMaterial.roughness=.5,[2]}))}))}}),Object.defineProperty(t.prototype,"createMuzzleFlashParticleSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.muzzleFlashParticleSystem=new p.okU("muzzleFlash",200,this.scene);var e=new p.gPd("./textures/particles/muzzle_05.png",this.scene);e._parentContainer=this.gunMesh,this.muzzleFlashParticleSystem.particleTexture=e,this.muzzleFlashParticleSystem.emitter=this.gunMesh,this.muzzleFlashParticleSystem.minEmitBox=new p.Pq0(-.2,.1,4),this.muzzleFlashParticleSystem.maxEmitBox=new p.Pq0(-.2,.1,4),this.muzzleFlashParticleSystem.color1=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.color2=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.colorDead=new p.ov8(1,.5,0,1),this.muzzleFlashParticleSystem.minSize=1,this.muzzleFlashParticleSystem.maxSize=1.5,this.muzzleFlashParticleSystem.minLifeTime=.01,this.muzzleFlashParticleSystem.maxLifeTime=.01,this.muzzleFlashParticleSystem.emitRate=20,this.muzzleFlashParticleSystem.start(),this.muzzleFlashParticleSystem.stop()}}),Object.defineProperty(t.prototype,"controlFireRate",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.canFire||(this.currentFireRate-=this.scene.getEngine().getDeltaTime(),this.currentFireRate<=0&&(this.canFire=!0,this.currentFireRate=this.fireRate))}}),t}(C),B=function(e){function t(t,i,a,n,r){var o=e.call(this,t,i,a,n,r)||this;return Object.defineProperty(o,"isFiring",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isReloading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"ammo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"reloadAmmo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"canFire",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"currentFireRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"muzzleFlashParticleSystem",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"damage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.scene.getEngine().displayLoadingUI(),o.isFiring=!1,o.isReloading=!1,o.ammo=12,o.reloadAmmo=36,o.fireRate=100,o.canFire=!0,o.currentFireRate=0,o.toggleAutomatic=!1,o.damage=10,o.loadBulletholes(),o}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateG",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,Promise,(function(){var e,t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","pistol.glb")];case 1:return e=n.sent(),t=e.meshes,i=e.animationGroups,this.gunMeshChild=t[1],a=new p.VR0("glb"),t[0].parent=a,t[0].isVisible=!0,t[0].renderingGroupId=100,this.gunMesh=t[0],190,250,this.animationGroups=i,i.forEach((function(e){e.stop(),e.start(!0,.2,436,498)})),a.parent=this.camera,a.position.y-=.16,a.position.z+=.5,a.position.x+=.32,a.scaling.set(.01,.01,.01),this.CreateCrosshair(),this.shootSound=new p.ABN("shootSound","./audio/pistolshoot.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.shootSound.attachToMesh(this.gunMesh),this.emptySound=new p.ABN("emptySound","./audio/empty.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.emptySound.attachToMesh(this.gunMesh),this.reloadSound=new p.ABN("reloadSound","./audio/reload.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.reloadSound.attachToMesh(this.gunMesh),this.readySound=new p.ABN("reloadSound","./audio/weapons/readyRifle.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.readySound.attachToMesh(this.gunMesh),this.createMuzzleFlashParticleSystem(),this.isMeshCreated=!0,[2]}}))}))}}),Object.defineProperty(t.prototype,"CreateCrosshair",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=1,t=p.PeD.CreatePlane("crosshair",{size:e}),i=new p.FUi("crossHairMaterial",this.scene);t.material=i;var a=new p.gPd("./textures/crosshair.png",this.scene);return i.diffuseTexture=a,i.diffuseColor=p.v9j.White(),i.opacityTexture=i.diffuseTexture,i.transparencyMode=p.imn.MATERIAL_ALPHABLEND,i.alpha=1,a.hasAlpha=!0,t.parent=this.camera,t.position.z=1,t.scaling=new p.Pq0(.075,.075,.075),t.checkCollisions=!1,t.isPickable=!1,t}}),Object.defineProperty(t.prototype,"shootAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isFiring=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,0,28),e.muzzleFlashParticleSystem&&(e.muzzleFlashParticleSystem.start(),setTimeout((function(){e.muzzleFlashParticleSystem.stop()}),10)),t.onAnimationEndObservable.addOnce((function(){e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.player.isDead()||!e.isFiring&&e.isReloading||(e.animationGroups.forEach((function(e){e.stop(),e.start(!0,.2,436,498)})),e.isFiring=!1)}}),Object.defineProperty(t.prototype,"reloadAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isReloading=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,135,315),t.onAnimationEndObservable.addOnce((function(){e.isReloading=!1,e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"readyAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,340,435),t.onAnimationEndObservable.addOnce((function(){e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"shoot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.canFire&&!this.isReloading&&this.ammo>0){this.shootSound.play();var t=Math.random()*Math.PI*2,i=.04*Math.random(),a=new p.Pq0(Math.cos(t)*i,0,Math.sin(t)*i),n=(this.camera.getForwardRay().direction.add(a),this.scene.createPickingRay(this.canvas.clientWidth/2,this.canvas.clientHeight/2,null,this.camera)),r=this.scene.pickWithRay(n);if(r&&r.hit){if(p.YDL.MatchesQuery(r.pickedMesh,"enemy")){var o=this.getEnemyFromMesh(r.pickedMesh);o&&(o.health-=this.damage,o.health>0&&this.playShotAnimation(o),o.health<=0&&(o.states.DESTROYED||(this.player.score+=o.scoreValue,this.playDeathAnimation(o),o.death.onAnimationEndObservable.addOnce((function(){if(o){var t=e.enemies.indexOf(o);-1!==t&&e.enemies.splice(t,1);var i=e.player.firstPersonController.enemies.indexOf(o);-1!==i&&e.player.firstPersonController.enemies.splice(i,1)}})),o.states.DESTROYED=!0)))}var s=.1,l=p.PeD.CreateDecal("decal",r.pickedMesh,{position:r.pickedPoint,normal:r.getNormal(!0),size:new p.Pq0(s,s,s)});l.material=this.bulletHoleMaterial,setTimeout((function(){l.dispose()}),1e4)}this.ammo-=1}}}),Object.defineProperty(t.prototype,"reloadWeapon",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.ammo,t=Math.min(12-e,this.reloadAmmo);this.ammo+=t,this.reloadAmmo-=t}}),Object.defineProperty(t.prototype,"getEnemyFromMesh",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=0,i=this.enemies;t<i.length;t++){var a=i[t];if(a.mesh===e)return a}}}),Object.defineProperty(t.prototype,"loadBulletholes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){return(0,b.YH)(this,(function(e){return this.bulletHoleMaterial=new p.YOq("bulletHoleMaterial",this.scene),this.bulletHoleMaterial.albedoTexture=new p.gPd("textures/bullet_hole.png",this.scene),this.bulletHoleMaterial.albedoTexture.hasAlpha=!0,this.bulletHoleMaterial.zOffset=-.25,this.bulletHoleMaterial.roughness=.5,[2]}))}))}}),Object.defineProperty(t.prototype,"createMuzzleFlashParticleSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.muzzleFlashParticleSystem=new p.okU("muzzleFlash",200,this.scene);var e=new p.gPd("./textures/particles/muzzle_05.png",this.scene);e._parentContainer=this.gunMesh,this.muzzleFlashParticleSystem.particleTexture=e,this.muzzleFlashParticleSystem.emitter=this.gunMesh,this.muzzleFlashParticleSystem.minEmitBox=new p.Pq0(-8,7,100),this.muzzleFlashParticleSystem.maxEmitBox=new p.Pq0(-8,7,100),this.muzzleFlashParticleSystem.color1=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.color2=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.colorDead=new p.ov8(1,.5,0,1),this.muzzleFlashParticleSystem.minSize=.3,this.muzzleFlashParticleSystem.maxSize=.74,this.muzzleFlashParticleSystem.minLifeTime=.01,this.muzzleFlashParticleSystem.maxLifeTime=.01,this.muzzleFlashParticleSystem.emitRate=10,this.muzzleFlashParticleSystem.start(),this.muzzleFlashParticleSystem.stop()}}),Object.defineProperty(t.prototype,"controlFireRate",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.canFire||(this.currentFireRate-=this.scene.getEngine().getDeltaTime(),this.currentFireRate<=0&&(this.canFire=!0,this.currentFireRate=this.fireRate))}}),t}(C),R=function(e){function t(t,i,a,n,r){var o=e.call(this,t,i,a,n,r)||this;return Object.defineProperty(o,"isFiring",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"isReloading",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"ammo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"reloadAmmo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"canFire",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"currentFireRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"muzzleFlashParticleSystem",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"isReadying",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o.isFiring=!1,o.isShootingAnimationPlaying=!1,o.isReloading=!1,o.isReadying=!1,o.ammo=100,o.reloadAmmo=600,o.fireRate=55,o.canFire=!0,o.currentFireRate=0,o.toggleAutomatic=!0,o.damage=17,o.loadBulletholes(),o}return(0,b.C6)(t,e),Object.defineProperty(t.prototype,"CreateG",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,Promise,(function(){var e,t,i,a;return(0,b.YH)(this,(function(n){switch(n.label){case 0:return[4,p.cng.ImportMeshAsync("","./models/","minigun.glb")];case 1:return e=n.sent(),t=e.meshes,i=e.animationGroups,this.gunMeshChild=t[1],a=new p.VR0("glb"),t[0].parent=a,t[0].isVisible=!0,t[0].renderingGroupId=100,this.gunMesh=t[0],190,250,this.animationGroups=i,i.forEach((function(e){e.stop(),e.start(!0,.5,14,120)})),a.parent=this.camera,a.position.y-=.2,a.position.z+=.5,a.position.x+=.32,a.rotate(p.Pq0.Up(),Math.PI/16),a.scaling.set(1,1,1),this.CreateCrosshair(),this.shootSound=new p.ABN("shootSound","./audio/lmgfire1.wav",this.scene,null,{spatialSound:!0,volume:.5,autoplay:!1}),this.shootSound.attachToMesh(this.gunMesh),this.emptySound=new p.ABN("emptySound","./audio/empty.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.emptySound.attachToMesh(this.gunMesh),this.reloadSound=new p.ABN("reloadSound","./audio/minigunreload.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1}),this.reloadSound.attachToMesh(this.gunMesh),this.readySound=new p.ABN("reloadSound","./audio/weapons/readyRifle.mp3",this.scene,null,{spatialSound:!0,volume:0,autoplay:!1}),this.readySound.attachToMesh(this.gunMesh),this.createMuzzleFlashParticleSystem(),this.isMeshCreated=!0,[2]}}))}))}}),Object.defineProperty(t.prototype,"CreateCrosshair",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=1,t=p.PeD.CreatePlane("crosshair",{size:e}),i=new p.FUi("crossHairMaterial",this.scene);t.material=i;var a=new p.gPd("./textures/crosshair.png",this.scene);return i.diffuseTexture=a,i.diffuseColor=p.v9j.White(),i.opacityTexture=i.diffuseTexture,i.transparencyMode=p.imn.MATERIAL_ALPHABLEND,i.alpha=1,a.hasAlpha=!0,t.parent=this.camera,t.position.z=1,t.scaling=new p.Pq0(.075,.075,.075),t.checkCollisions=!1,t.isPickable=!1,t}}),Object.defineProperty(t.prototype,"shootAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isShootingAnimationPlaying||(e.isFiring=!0,e.isShootingAnimationPlaying=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,.6,4,12),t.onAnimationEndObservable.addOnce((function(){e.idleAnimation(e),e.isShootingAnimationPlaying=!1}))})))}}),Object.defineProperty(t.prototype,"muzzleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.muzzleFlashParticleSystem&&(e.muzzleFlashParticleSystem.start(),setTimeout((function(){e.muzzleFlashParticleSystem.stop()}),10))}}),Object.defineProperty(t.prototype,"idleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.player.isDead()||!e.isFiring&&e.isReloading||(e.animationGroups.forEach((function(e){e.stop(),e.start(!0,.5,14,120)})),e.isFiring=!1,e.isShootingAnimationPlaying=!1)}}),Object.defineProperty(t.prototype,"reloadAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isReloading=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,121,258),t.onAnimationEndObservable.addOnce((function(){e.isReloading=!1,e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"readyAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isReadying=!0,e.animationGroups.forEach((function(t){t.stop(),t.start(!1,1,280,320),t.onAnimationEndObservable.addOnce((function(){e.isReadying=!1,e.idleAnimation(e)}))}))}}),Object.defineProperty(t.prototype,"shoot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.canFire&&!this.isReloading&&this.ammo>0){this.shootSound.play();var t=Math.random()*Math.PI*2,i=.04*Math.random(),a=new p.Pq0(Math.cos(t)*i,0,Math.sin(t)*i),n=this.camera.getForwardRay().direction.add(a),r=this.scene.createPickingRay(this.canvas.clientWidth/2,this.canvas.clientHeight/2,null,this.camera);r.direction=n;var o=this.scene.pickWithRay(r);if(o&&o.hit){if(p.YDL.MatchesQuery(o.pickedMesh,"enemy")){var s=this.getEnemyFromMesh(o.pickedMesh);s&&(s.health-=this.damage,s.health>0&&this.playShotAnimation(s),s.health<=0&&(s.states.DESTROYED||(this.player.score+=s.scoreValue,this.playDeathAnimation(s),s.death.onAnimationEndObservable.addOnce((function(){if(s){var t=e.enemies.indexOf(s);-1!==t&&e.enemies.splice(t,1);var i=e.player.firstPersonController.enemies.indexOf(s);-1!==i&&e.player.firstPersonController.enemies.splice(i,1)}})),s.states.DESTROYED=!0)))}var l=.1,u=p.PeD.CreateDecal("decal",o.pickedMesh,{position:o.pickedPoint,normal:o.getNormal(!0),size:new p.Pq0(l,l,l)});u.material=this.bulletHoleMaterial,setTimeout((function(){u.dispose()}),1e4)}this.ammo-=1}}}),Object.defineProperty(t.prototype,"reloadWeapon",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.ammo,t=Math.min(100-e,this.reloadAmmo);this.ammo+=t,this.reloadAmmo-=t}}),Object.defineProperty(t.prototype,"getEnemyFromMesh",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=0,i=this.enemies;t<i.length;t++){var a=i[t];if(a.mesh===e)return a}}}),Object.defineProperty(t.prototype,"loadBulletholes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,b.sH)(this,void 0,void 0,(function(){return(0,b.YH)(this,(function(e){return this.bulletHoleMaterial=new p.YOq("bulletHoleMaterial",this.scene),this.bulletHoleMaterial.albedoTexture=new p.gPd("./textures/bullet_hole.png",this.scene),this.bulletHoleMaterial.roughness=.5,this.bulletHoleMaterial.albedoTexture.hasAlpha=!0,this.bulletHoleMaterial.zOffset=-.25,[2]}))}))}}),Object.defineProperty(t.prototype,"createMuzzleFlashParticleSystem",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.muzzleFlashParticleSystem=new p.okU("muzzleFlash",200,this.scene);var e=new p.gPd("./textures/particles/star_01.png",this.scene);e._parentContainer=this.gunMesh,this.muzzleFlashParticleSystem.particleTexture=e,this.muzzleFlashParticleSystem.emitter=this.gunMesh,this.muzzleFlashParticleSystem.minEmitBox=new p.Pq0(-.3,-.25,3.2),this.muzzleFlashParticleSystem.maxEmitBox=new p.Pq0(-.3,-.25,3.2),this.muzzleFlashParticleSystem.color1=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.color2=new p.ov8(.8,.5,0,1),this.muzzleFlashParticleSystem.colorDead=new p.ov8(1,.5,0,1),this.muzzleFlashParticleSystem.minSize=1,this.muzzleFlashParticleSystem.maxSize=2,this.muzzleFlashParticleSystem.minLifeTime=.01,this.muzzleFlashParticleSystem.maxLifeTime=.01,this.muzzleFlashParticleSystem.emitRate=25,this.muzzleFlashParticleSystem.minInitialRotation=0,this.muzzleFlashParticleSystem.maxInitialRotation=2*Math.PI,this.muzzleFlashParticleSystem.start(),this.muzzleFlashParticleSystem.stop()}}),Object.defineProperty(t.prototype,"controlFireRate",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.canFire||(this.currentFireRate-=this.scene.getEngine().getDeltaTime(),this.currentFireRate<=0&&(this.canFire=!0,this.currentFireRate=this.fireRate))}}),t}(C),I=function(){function e(e){var t=this;Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"engine",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"weapon",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inventory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentWeaponIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isJumping",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wantToJump",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isMoving",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isSprinting",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ui",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enemies",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"player",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"playerBox",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ground",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outOfBreathSound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"jumpSpeed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"jumpHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"jumpPeak",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minigun",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pistol",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rifle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ammopickup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstaid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"weaponPickups",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lmg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"torchPowerup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canReload",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.engine=new p.N$8(this.canvas,!0),this.level=new M(this.engine,this),this.scene=this.level.scene,this.canReload=!0,this.isPaused=!1,this.outOfBreathSound=new p.ABN("outOfBreath","./audio/player/outofbreath.mp3",this.scene,null,{volume:1,autoplay:!1}),this.isSprinting=!1,this.isJumping=!1,this.isMoving=!1,this.jumpSpeed=.1,this.jumpHeight=2,this.jumpPeak=0,this.enemies=[],this.inventory=[],this.ammopickup=this.level.ammopickup,this.firstaid=this.level.firstaid,this.CreateController(),this.CreateImpostors(),this.player=new T(this.camera,this.scene,this),this.minigun=new R(this.scene,this.camera,this.enemies,this.player,this.canvas),this.pistol=new B(this.scene,this.camera,this.enemies,this.player,this.canvas),this.rifle=new C(this.scene,this.camera,this.enemies,this.player,this.canvas),this.lmg=new x(this.scene,this.camera,this.enemies,this.player,this.canvas),this.lmg.preloadMesh(),this.minigun.preloadMesh(),this.rifle.preloadMesh(),this.weapon=this.pistol,this.inventory.push(this.weapon),this.currentWeaponIndex=0,this.inventory.forEach((function(e,i){e!==t.weapon&&e.preloadMesh()})),this.weapon.CreateG(),this.setupInput(),this.loadFootsteps(),this.ui=new z(this.player,this.weapon,this.inventory,this.currentWeaponIndex,this.level),this.ui.unpauseButton.onPointerClickObservable.add((function(){t.togglePause()})),this.weaponPickups=this.level.weaponPickups,this.torchPowerup=new j(this.scene,this.camera),this.torchPowerup.CreateTorchPowerup(new p.Pq0(-30,0,40));var i=!1;this.scene.onPointerDown=function(e){var a;t.engine.isPointerLock||0!==e.button?0!==e.button||t.player.isDead()||t.weapon.isReloading||(t.weapon.toggleAutomatic?(i=!0,t.canReload=!1,r()):n()):(t.engine.enterPointerlock(),null===(a=p.N$8.audioEngine)||void 0===a||a.unlock())},this.scene.onPointerUp=function(e){0===e.button&&(i=!1,t.canReload=!0)};var a=0,n=function(){t.weapon.ammo>0?(t.weapon.shoot(),t.weapon===t.minigun?(t.weapon.isReadying&&(t.weapon.animationGroups.forEach((function(e){e.stop()})),t.weapon.isReadying=!1),t.weapon.shootAnimation(t.weapon),t.minigun.muzzleAnimation(t.weapon)):t.weapon.shootAnimation(t.weapon)):t.weapon.emptySound.play()},r=function(){var e=performance.now();i&&t.weapon.toggleAutomatic&&(t.weapon.ammo>0&&e-a>=t.weapon.fireRate?(n(),a=e):t.weapon.ammo<=0&&(i=!1,t.weapon.emptySound.play())),requestAnimationFrame(r)};requestAnimationFrame(r),this.scene.onDataLoadedObservable.addOnce((function(){t.camera.needMoveForGravity=!0,t.engine.hideLoadingUI(),t.level.startWaveSystem()})),this.scene.registerBeforeRender((function(){for(var e=0,i=t.enemies;e<i.length;e++){var a=i[e];a.move(t.player)}t.playerBox.position.y+1>1.56&&(t.camera.position.y=t.playerBox.position.y+1),t.playerBox.position.z=t.camera.position.z,t.playerBox.position.x=t.camera.position.x,t.camera.position.y<=1.56&&(t.isJumping=!1),t.playerBox.position.y<0&&(t.playerBox.position.y=.57)})),this.engine.runRenderLoop((function(){t.isPaused?t.ui.showPauseScreen():(t.player.updatePosition(t.camera),t.ui.updateAmmoText(),t.ui.updatePlayerHP(),t.ui.updateStaminaText(),t.ui.updatePlayerScore(),t.ui.updateWaveNumber(),t.ui.updateWaveTimer(),t.player.health<=0&&(t.camera.position.y=.3,t.weapon.animationGroups.forEach((function(e){e.stop()})),t.camera.detachControl(),t.engine.exitPointerlock(),t.ui.createDeathScreen()),t.isSprinting&&t.player.stamina>0&&(t.camera.speed=t.player.sprintSpeed),(!t.isSprinting||t.player.stamina<=0)&&(t.camera.speed=t.player.walkSpeed),t.scene.render())}))}return Object.defineProperty(e.prototype,"CreateController",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=new p.SCQ("camera",new p.Pq0(-35,15,55),this.scene);t.setTarget(new p.Pq0(0,1.5,-2)),t.attachControl(),t.applyGravity=!0,t.checkCollisions=!0,t.ellipsoid=new p.Pq0(1,.75,1),t.minZ=0,t.speed=1.2,t.angularSensibility=800,t.keysUp.push(90),t.keysUp.push(87),t.keysDown.push(83),t.keysLeft.push(81),t.keysLeft.push(65),t.keysRight.push(68),t.inertia=.1,this.camera=t,t.onCollide=function(t){switch(t.id){case"ammoBox":e.ammopickup.pickupSound.play(),e.weapon.reloadAmmo+=120,e.weapon.reloadWeapon(),t.dispose();break;case"firstAid":e.firstaid.pickupSound.play(),e.player.health=e.player.maxHealth,t.dispose();break;case"minigunPickup":e.weaponPickups.pickupSound.play(),e.inventory.includes(e.minigun)?e.minigun.reloadAmmo+=180:e.inventory.push(e.minigun),t.dispose();break;case"pistolPickup":e.weaponPickups.pickupSound.play(),e.inventory.includes(e.pistol)?e.pistol.reloadAmmo+=60:e.inventory.push(e.pistol),t.dispose();break;case"riflePickup":e.weaponPickups.pickupSound.play(),e.inventory.includes(e.rifle)?e.rifle.reloadAmmo+=60:e.inventory.push(e.rifle),t.dispose();break;case"lmgPickup":e.weaponPickups.pickupSound.play(),e.inventory.includes(e.lmg)?e.lmg.reloadAmmo+=120:e.inventory.push(e.lmg),t.dispose();break;case"torchPowerup":e.torchPowerup.pickupSound.play(),e.rifle.damage+=4,e.pistol.damage+=2,e.minigun.damage+=6,e.lmg.damage+=6,e.player.score+=e.level.torchPowerup.scoreValue,e.player.jumpingPower<12&&(e.player.jumpingPower+=1),e.player.staminaDecayRate>2&&(e.player.staminaDecayRate-=1),e.player.staminaRegenRate<10&&(e.player.staminaRegenRate+=1),t.dispose();break;case"medalPowerup":e.torchPowerup.pickupSound.play(),e.player.sprintSpeed<7&&(e.player.sprintSpeed+=.25),e.player.score+=e.level.medalPowerup.scoreValue,t.dispose();break;default:break}}}}),Object.defineProperty(e.prototype,"setupInput",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t={KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1,ShiftLeft:!1,ShiftRight:!1};document.addEventListener("keydown",(function(i){switch("KeyW"!==i.code&&"KeyA"!==i.code&&"KeyS"!==i.code&&"KeyD"!==i.code||(e.isMoving=!0,t[i.code]=!0),"ShiftLeft"!==i.code&&"ShiftRight"!==i.code||!e.isMoving||(i.preventDefault(),e.isSprinting=!0,e.player.stamina>0?e.camera.speed=e.player.sprintSpeed:e.camera.speed=e.player.walkSpeed,e.player.decayStamina()),i.code){case"Digit1":i.preventDefault(),e.switchWeaponByKey(0);break;case"Digit2":i.preventDefault(),e.switchWeaponByKey(1);break;case"Digit3":i.preventDefault(),e.switchWeaponByKey(2);break;case"Digit4":i.preventDefault(),e.switchWeaponByKey(3);break;case"Digit9":i.preventDefault(),e.toggleGodMode();break}})),document.addEventListener("keyup",(function(i){"KeyW"!==i.code&&"KeyA"!==i.code&&"KeyS"!==i.code&&"KeyD"!==i.code||(t[i.code]=!1,t["KeyW"]||t["KeyA"]||t["KeyS"]||t["KeyD"]||(e.isMoving=!1)),"ShiftLeft"!==i.code&&"ShiftRight"!==i.code||(e.isSprinting=!1,e.camera.speed=e.player.walkSpeed,e.player.regenStamina())})),window.addEventListener("keydown",(function(t){"Space"!==t.code||e.isJumping||(t.preventDefault(),e.jump(),e.isJumping=!0),"KeyR"===t.code&&e.weapon.reloadAmmo>0&&!e.weapon.isReloading&&e.canReload&&(e.weapon.reloadAnimation(e.weapon),e.weapon.reloadWeapon(),e.weapon.reloadSound.play()),"KeyH"===t.code&&(console.log("PLAYERBOX: ",e.playerBox.position.y),console.log("player x:",e.camera.position.x),console.log("player y:",e.camera.position.y),console.log("player z:",e.camera.position.z))})),window.addEventListener("wheel",(function(t){t.target===e.canvas&&(t.preventDefault(),t.deltaY<0?e.cycleWeapon(1):t.deltaY>0&&e.cycleWeapon(-1))}),{passive:!1})}}),Object.defineProperty(e.prototype,"jump",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isJumping||this.player.isDead()||this.playerBox.physicsImpostor.applyImpulse(new p.Pq0(0,this.player.jumpingPower,0),this.playerBox.getAbsolutePosition())}}),Object.defineProperty(e.prototype,"loadFootsteps",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=new p.ABN("footstepsSound","./audio/footsteps.mp3",this.scene,null,{volume:1,loop:!0}),i=function(){t.isPlaying||t.play()},a=function(){t.isPlaying&&t.stop()};this.scene.onBeforeRenderObservable.add((function(){!e.isMoving||e.player.isDead()||e.isJumping?a():i()}))}}),Object.defineProperty(e.prototype,"loadBreathing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=new p.ABN("firstAidPickup","./audio/player/outofbreath.mp3",this.scene,null,{spatialSound:!0,volume:1,autoplay:!1});0==this.player.stamina&&e.play()}}),Object.defineProperty(e.prototype,"CreateImpostors",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.playerBox=p.PeD.CreateSphere("playerBox",{diameter:1},this.scene),this.playerBox.position.x=this.camera.position.x,this.playerBox.position.z=this.camera.position.z,this.playerBox.position.y=.555,this.playerBox.isVisible=!1,this.playerBox.isPickable=!1,this.playerBox.physicsImpostor=new p.jat(this.playerBox,p.jat.SphereImpostor,{mass:1,restitution:0,friction:0},this.scene),this.playerBox.physicsImpostor.registerOnPhysicsCollide(this.ground.physicsImpostor,this.isNotJumping)}}),Object.defineProperty(e.prototype,"isNotJumping",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isJumping=!1}}),Object.defineProperty(e.prototype,"cycleWeapon",{enumerable:!1,configurable:!0,writable:!0,value:function(e){1!==this.inventory.length&&(this.currentWeaponIndex+=e,this.currentWeaponIndex<0?this.currentWeaponIndex=this.inventory.length-1:this.currentWeaponIndex>=this.inventory.length&&(this.currentWeaponIndex=0),this.switchWeapon(this.currentWeaponIndex))}}),Object.defineProperty(e.prototype,"switchWeapon",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e>=0&&e<this.inventory.length&&(this.weapon&&this.weapon.isMeshCreated&&this.weapon.gunMesh&&this.weapon.gunMesh.setEnabled(!1),this.weapon=this.inventory[e],this.weapon.readyAnimation(this.weapon),this.weapon.readySfx(),this.ui.weapon=this.weapon,this.ui.updateAmmoText(),this.weapon.isMeshCreated||this.weapon.CreateG(),this.weapon&&this.weapon.isMeshCreated&&this.weapon.gunMesh&&this.weapon.gunMesh.setEnabled(!0),this.currentWeaponIndex=e)}}),Object.defineProperty(e.prototype,"applyShockwave",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.camera.speed;this.camera.speed=.5*this.camera.speed,setTimeout((function(){e.camera.speed=t}),6e3)}}),Object.defineProperty(e.prototype,"switchWeaponByKey",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e!==this.currentWeaponIndex&&e>=0&&e<this.inventory.length&&this.switchWeapon(e)}}),Object.defineProperty(e.prototype,"toggleGodMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.player.maxHealth=9e3,this.player.health=9e3,this.player.staminaDecayRate=0,this.player.staminaRegenRate=20,this.player.sprintSpeed=7,this.player.jumpingPower=12,this.inventory.push(this.rifle),this.inventory.push(this.lmg),this.inventory.push(this.minigun)}}),Object.defineProperty(e.prototype,"togglePause",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isPaused?(this.ui.showPauseScreen(),this.camera.detachControl()):(this.ui.hidePauseScreen(),this.camera.attachControl())}}),Object.defineProperty(e.prototype,"checkMeshesInFrustum",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.scene.meshes.forEach((function(t){e.camera.isInFrustum(t)?t.isVisible=!0:t.isVisible=!1}))}}),e}(),F=function(){function e(e){Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startButton",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.canvas=e,this.createUI(),this.setBackground()}return Object.defineProperty(e.prototype,"createUI",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=document.createElement("button");t.innerText="Jouer",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.padding="10px 20px",t.style.fontSize="16px",t.style.backgroundColor="#4CAF50",t.style.color="white",t.style.border="none",t.style.borderRadius="5px",t.style.cursor="pointer",t.addEventListener("click",(function(){e.startGame()})),document.body.appendChild(t),this.startButton=t}}),Object.defineProperty(e.prototype,"setBackground",{enumerable:!1,configurable:!0,writable:!0,value:function(){document.body.style.backgroundImage='url("textures/olympicBackground.jpg")',document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundRepeat="no-repeat",document.body.style.height="100vh",document.body.style.margin="0"}}),Object.defineProperty(e.prototype,"startGame",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.startButton.remove(),new I(this.canvas)}}),e}(),G=(0,n.pM)({name:"SaviorComponent",mounted:function(){var e=this.$refs.canvas;new F(e)}}),N=i(6262);const L=(0,N.A)(G,[["render",h],["__scopeId","data-v-036e46e7"]]);var D=L,H=(0,n.pM)({name:"App",components:{Savior:D}});const W=(0,N.A)(H,[["render",r]]);var V=W;(0,a.Ef)(V).mount("#app")}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,a,n,r){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],r=e[c][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](a[l])}))?a.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,n,r]}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/testing/"}(),function(){i.b=document.baseURI||self.location.href;var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,o=a[0],s=a[1],l=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)var c=l(i)}for(t&&t(a);u<o.length;u++)r=o[u],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},a=self["webpackChunkb101"]=self["webpackChunkb101"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[504],(function(){return i(2236)}));a=i.O(a)})();
//# sourceMappingURL=app.21475fa7.js.map